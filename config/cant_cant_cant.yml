# This configuration file is initialized using `rails g cant_cant_cant:install`

# The default permission is generated by scanning all non-internal routes
all: &all
  api/v1/admin/collections#add_members: deny
  api/v1/admin/collections#add_members: deny
  api/v1/admin/collections#create: deny
  api/v1/admin/collections#destroy: deny
  api/v1/admin/collections#reset_members: deny
  api/v1/admin/collections#update: deny
  api/v1/admin/columns#add_members: deny
  api/v1/admin/columns#add_members: deny
  api/v1/admin/columns#create: deny
  api/v1/admin/columns#create: deny
  api/v1/admin/columns#destroy: deny
  api/v1/admin/columns#destroy: deny
  api/v1/admin/columns#index: deny
  api/v1/admin/columns#show: deny
  api/v1/admin/columns#update: deny
  api/v1/admin/columns#update: deny
  api/v1/admin/comments#destroy: deny
  api/v1/admin/comments#index: deny
  api/v1/admin/comments#index_for_commentable: deny
  api/v1/admin/comments#set_spam: deny
  api/v1/admin/comments#unset_spam: deny
  api/v1/admin/posts#close: deny
  api/v1/admin/posts#create: deny
  api/v1/admin/posts#destroy: deny
  api/v1/admin/posts#draft: deny
  api/v1/admin/posts#index: deny
  api/v1/admin/posts#publish: deny
  api/v1/admin/posts#show: deny
  api/v1/admin/posts#update: deny
  api/v1/ads#index: deny
  api/v1/collections#index: deny
  api/v1/collections#show: deny
  api/v1/columns#index: deny
  api/v1/columns#show: deny
  api/v1/comments#create: deny
  api/v1/comments#index: deny
  api/v1/home#web_index: deny
  api/v1/posts#hot_in_week: deny
  api/v1/posts#index: deny
  api/v1/posts#index_by_tag: deny
  api/v1/posts#show: deny


visitor: &visitor
  api/v1/ads#index: allow

  api/v1/collections#show: allow

  api/v1/columns#show: allow

  api/v1/posts#index: allow
  api/v1/posts#show: allow
  api/v1/posts#hot_in_week: allow
  api/v1/posts#index_by_tag: allow

  api/v1/comments#create: allow
  api/v1/comments#index: allow

user: &user {}

editor: &editor
  api/v1/collections#index: allow
  api/v1/collections#reset_members: allow
  api/v1/collections#add_members: allow
  api/v1/collections#create: allow
  api/v1/collections#destroy: allow

  api/v1/columns#index: allow
  api/v1/columns#add_members: allow

  api/v1/admin/posts#show: allow
  api/v1/admin/posts#index: allow
  api/v1/admin/posts#update: allow
  api/v1/admin/posts#destroy: allow
  api/v1/admin/posts#create: allow

  api/v1/admin/posts#publish: allow
  api/v1/admin/posts#draft: allow
  api/v1/admin/posts#close: allow

  api/v1/admin/columns#show: allow
  api/v1/admin/columns#index: allow
  api/v1/admin/columns#add_members: allow


  api/v1/admin/comments#index: allow
  api/v1/admin/comments#index_for_commentable: allow
  api/v1/admin/comments#destroy: allow
  api/v1/admin/comments#set_spam: allow
  api/v1/admin/comments#unset_spam: allow

  api/v1/admin/collections#create: allow
  api/v1/admin/collections#destroy: allow
  api/v1/admin/collections#add_members: allow
  api/v1/admin/collections#reset_members: allow

admin: &admin
  api/v1/collections#update: allow

  api/v1/admin/columns#destroy: allow
  api/v1/admin/columns#create: allow
  api/v1/admin/columns#update: allow

  api/v1/admin/collections#add_members: deny
  api/v1/admin/collections#create: deny
  api/v1/admin/collections#destroy: deny
  api/v1/admin/collections#reset_members: deny
  api/v1/admin/collections#update: allow

dev: &dev
  <<: *all
  <<: *visitor
  <<: *user
  <<: *editor
  <<: *admin
