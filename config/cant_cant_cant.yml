# This configuration file is initialized using `rails g cant_cant_cant:install`

# The default permission is generated by scanning all non-internal routes
visitor: &visitor
  # collections
  api/v1/collections#show: allow

  api/v1/collections#create: deny
  api/v1/collections#destroy: deny
  api/v1/collections#update: deny
  api/v1/collections#reset_members: deny
  api/v1/collections#add_members: deny

  api/v1/columns#show: allow

  api/v1/columns#create: deny
  api/v1/columns#destroy: deny
  api/v1/columns#update: deny
  api/v1/columns#add_members: deny

  api/v1/posts#show: allow

  api/v1/admin/posts#show: deny
  api/v1/admin/posts#index: deny
  api/v1/admin/posts#update: deny
  api/v1/admin/posts#destroy: deny
  api/v1/admin/posts#create: deny
  api/v1/admin/posts#publish: deny
  api/v1/admin/posts#draft: deny
  api/v1/admin/posts#close: deny

user: &user {}

editor: &editor
  api/v1/collections#index: allow
  api/v1/collections#reset_members: allow
  api/v1/collections#add_members: allow
  api/v1/collections#create: allow
  api/v1/collections#destroy: allow

  api/v1/columns#index: allow
  api/v1/columns#add_members: allow

  api/v1/admin/posts#show: allow
  api/v1/admin/posts#index: allow
  api/v1/admin/posts#update: allow
  api/v1/admin/posts#destroy: allow
  api/v1/admin/posts#create: allow

  api/v1/admin/posts#publish: allow
  api/v1/admin/posts#draft: allow
  api/v1/admin/posts#close: allow

admin: &admin
  api/v1/collections#update: allow

  api/v1/columns#create: allow
  api/v1/columns#destroy: allow
  api/v1/columns#update: allow

dev: &dev
  <<: *visitor
  <<: *user
  <<: *editor
  <<: *admin
